<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <script src="https://quge5.com/88/tag.min.js" data-zone="202082" async data-cfasync="false"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© - brglive</title>
    <meta name="description"
        content="Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ brglive Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© HD. Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù…Ø¹ Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø¨Ø¯ÙˆÙ† ØªÙ‚Ø·ÙŠØ¹ Ù…Ø¬Ø§Ù†Ø§Ù‹.">
    <meta name="keywords" content="Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±, Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ù…Ø¨Ø§Ø±ÙŠØ§Øª, ÙƒÙˆØ±Ø© Ù„Ø§ÙŠÙ, ÙŠÙ„Ø§ Ø´ÙˆØª Ù…Ø¨Ø§Ø´Ø±, Ø¨Ø« Ø­ÙŠ, brglive">
    <meta name="author" content="brglive">
    <meta property="og:title" content="Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© - brglive">
    <meta property="og:description" content="Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© HD Ù…Ø¬Ø§Ù†Ø§Ù‹">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://brglive.abrdns.com/watch.html">
    <meta property="og:image" content="https://brglive.abrdns.com/assets/logo.png">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://brglive.abrdns.com/watch.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/watch.css">
    <link rel="icon" type="image/png" href="assets/logo.png">

    <script src="https://pl28468203.effectivegatecpm.com/c2/a8/a5/c2a8a5e4c3ca5bb2f09f4da484332995.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/mpegts.js@latest"></script>
</head>

<body>

    <!-- Header -->
    <header class="main-header">
        <div class="container header-content">
            <button id="menu-toggle" aria-current="false" aria-label="Menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>

            <a href="index.html" class="logo">
                <img src="assets/brglive_logo.png" alt="brglive logo" id="site-logo">
            </a>

            <button id="theme-toggle" aria-label="Toggle Dark Mode">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="display:none;">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Watch Content -->
    <main class="container">

        <main class="main-content">
            <!-- New VS Banner -->
            <div class="vs-banner">
                <div class="vs-banner-overlay"></div>
                <div class="match-header">
                    <div class="team">
                        <div class="team-logo" style="background:transparent; width:100px; height:100px;"></div>
                        <h2>--</h2>
                    </div>
                    <div class="vs-text">VS</div>
                    <div class="team">
                        <div class="team-logo" style="background:transparent; width:100px; height:100px;"></div>
                        <h2>--</h2>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a> &gt; <span>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</span>
                </div>

                <!-- Server Selection -->
                <div class="server-list">
                    <button class="server-btn main-server active" data-player="web">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± 1 (4K)</button>
                    <button class="server-btn alt-server" data-player="web">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± 2</button>
                    <button class="server-btn alt-server" data-player="web">Ø¨Ø« Ø§Ø­ØªÙŠØ§Ø·ÙŠ</button>
                    <button class="server-btn" data-player="mpv" style="background:#e74c3c;">ğŸ¬ ÙØªØ­ ÙÙŠ MPV</button>
                    <button class="server-btn" style="background:#333;">&lt;/&gt; Ø±Ù…Ø² Ø§Ù„ØªØ¶Ù…ÙŠÙ†</button>
                </div>

                <!-- Video Player -->
                <div class="video-container">
                    <div class="player-overlay" onclick="unmuteVideo()">
                        <div class="unmute-btn">ğŸ”Š Click to Unmute</div>
                    </div>
                    <!-- Video Player injected by JS -->
                </div>

                <!-- MPV Instructions (hidden by default) -->
                <div id="mpv-instructions"
                    style="display:none; background:#2c3e50; color:#ecf0f1; padding:20px; border-radius:8px; margin-top:20px;">
                    <h3 style="margin-top:0; color:#3498db;">ğŸ“º ØªØ´ØºÙŠÙ„ ÙÙŠ MPV.net</h3>
                    <p>Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø« ÙÙŠ MPV.netØŒ Ø§Ù†Ø³Ø® Ø§Ù„Ø£Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ§Ù„ØµÙ‚Ù‡ ÙÙŠ PowerShell:</p>
                    <div
                        style="background:#34495e; padding:15px; border-radius:5px; margin:10px 0; font-family:monospace; font-size:12px; overflow-x:auto; position:relative;">
                        <code id="mpv-command" style="color:#2ecc71; word-break:break-all;"></code>
                        <button onclick="copyMpvCommand()"
                            style="position:absolute; top:10px; left:10px; background:#3498db; color:white; border:none; padding:5px 15px; border-radius:4px; cursor:pointer;">Ù†Ø³Ø®</button>
                    </div>
                    <p style="margin-bottom:0; font-size:14px; color:#95a5a6;">ğŸ’¡ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> MPV.net ÙŠØ¯Ø¹Ù…
                        Ø§Ù„Ø±Ø¤ÙˆØ³ Ø§Ù„Ù…Ø®ØµØµØ© ÙˆÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ Ù…Ø¹ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø­Ù…ÙŠ</p>
                </div>

                <!-- Match Details Grid (Deep Clone Icons) -->
                <div class="match-details-grid">
                    <div class="detail-card">
                        <div class="detail-icon">ğŸ†</div>
                        <div class="meta-item">
                            <span class="label">Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-icon">ğŸ¤</div>
                        <div class="meta-item">
                            <span class="label">Ø§Ù„Ù…Ø¹Ù„Ù‚</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-icon">ğŸ“º</div>
                        <div class="meta-item">
                            <span class="label">Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ù†Ø§Ù‚Ù„Ø©</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-icon">ğŸŸï¸</div>
                        <div class="meta-item">
                            <span class="label">Ø§Ù„Ù…Ù„Ø¹Ø¨</span>
                            <span class="value">Ø§Ø³ØªØ§Ø¯ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯</span>
                        </div>
                    </div>
                    <!-- Hidden Score for now or displayed differently -->
                    <div style="display:none;">
                        <span class="score-large">--</span>
                        <span class="status-badge">--</span>
                    </div>
                </div>

            </div>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="container">
                <div class="footer-links">
                    <a href="index.html">Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</a>
                    <a href="#">Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ØºØ¯</a>
                    <a href="#">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                </div>
                <p class="copyright">Â© 2026 brglive. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            </div>
        </footer>

        <script src="js/config.js"></script>
        <script src="js/main.js"></script>
        <script>
            // Global variable for current stream
            let currentStreamUrl = '';

            // Function to copy MPV command
            function copyMpvCommand() {
                const command = document.getElementById('mpv-command').textContent;
                navigator.clipboard.writeText(command).then(() => {
                    alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø£Ù…Ø±! Ø§Ù„ØµÙ‚Ù‡ ÙÙŠ PowerShell');
                });
            }

            // Unmute and play function
            function unmuteVideo() {
                const video = document.getElementById('video-player');
                if (video) {
                    video.muted = false;
                    video.play();
                    document.querySelector('.player-overlay').style.display = 'none';
                }
            }

            // Simple logic to handle server buttons
            const serverBtns = document.querySelectorAll('.server-btn');
            serverBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const playerType = btn.getAttribute('data-player');

                    if (playerType === 'mpv') {
                        // Show MPV instructions
                        showMpvInstructions(currentStreamUrl);
                        serverBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    } else if (playerType === 'web') {
                        // Hide MPV instructions and show web player
                        document.getElementById('mpv-instructions').style.display = 'none';
                        serverBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    }
                });
            });

            // Function to show MPV instructions
            function showMpvInstructions(streamUrl) {
                const mpvPath = 'C:\\Users\\Admin\\AppData\\Local\\Programs\\mpv.net\\mpvnet.exe';
                const command = `& "${mpvPath}" --referrer="https://x.com/" --user-agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" "${streamUrl}"`;

                document.getElementById('mpv-command').textContent = command;
                document.getElementById('mpv-instructions').style.display = 'block';

                // Scroll to instructions
                document.getElementById('mpv-instructions').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Dynamic Match Data Loading
            document.addEventListener('DOMContentLoaded', () => {
                const params = new URLSearchParams(window.location.search);
                const homeTeam = params.get('home');

                // Helper function to play stream
                function playStream(url) {
                    currentStreamUrl = url; // Store for MPV button

                    const container = document.querySelector('.video-container');
                    // Clear previous content but keep overlay if needed (though overlay logic might need adjustment)
                    // preserving overlay
                    const overlay = container.querySelector('.player-overlay');

                    // Remove existing player elements
                    const existingIframe = container.querySelector('iframe');
                    const existingVideo = container.querySelector('video');
                    if (existingIframe) existingIframe.remove();
                    if (existingVideo) existingVideo.remove();

                    // Check for M3U8 or TS files, or any insecure HTTP stream on this HTTPS site
                    const isM3u8 = url.includes('.m3u8');
                    const isTs = url.includes('.ts');
                    const isMpeg = url.includes('.mpeg') || url.includes('.mpg');
                    const isInsecure = url.startsWith('http:') && window.location.protocol === 'https:';

                    if (isM3u8 || isTs || isMpeg || isInsecure) {
                        // Route streams through proxy to handle headers and Mixed Content
                        const proxyUrl = CONFIG.getProxyUrl(url);

                        // Create Video Element
                        const video = document.createElement('video');
                        video.id = 'video-player';
                        video.controls = true;
                        video.style.width = '100%';
                        video.style.height = '100%';
                        video.style.backgroundColor = '#000';
                        video.playsInline = true; // Important for mobile
                        container.appendChild(video);

                        if (isM3u8 && Hls.isSupported()) {
                            // Use HLS.js for m3u8 files
                            const hls = new Hls({
                                debug: false,
                                enableWorker: true,
                                lowLatencyMode: true,
                                backBufferLength: 90,
                                xhrSetup: function (xhr, url) {
                                    xhr.setRequestHeader('Bypass-Tunnel-Reminder', 'true');
                                }
                            });
                            hls.loadSource(proxyUrl);
                            hls.attachMedia(video);
                            hls.attachMedia(video);
                            hls.on(Hls.Events.MANIFEST_PARSED, function () {
                                console.log('HLS stream loaded successfully');
                                video.muted = true;
                                video.play().catch(e => console.log('Autoplay blocked:', e));
                            });
                            hls.on(Hls.Events.ERROR, function (event, data) {
                                console.error('HLS error:', data);
                                if (data.fatal) {
                                    switch (data.type) {
                                        case Hls.ErrorTypes.NETWORK_ERROR:
                                            console.log('Network error, trying to recover...');
                                            hls.startLoad();
                                            break;
                                        case Hls.ErrorTypes.MEDIA_ERROR:
                                            console.log('Media error, trying to recover...');
                                            hls.recoverMediaError();
                                            break;
                                        default:
                                            console.log('Fatal error, cannot recover');
                                            hls.destroy();
                                            break;
                                    }
                                }
                            });
                        } else if ((isTs || isMpeg) && typeof mpegts !== 'undefined' && mpegts.getFeatureList().mseLivePlayback) {
                            // Use mpegts.js for .ts files (MPEG-TS streams)
                            const player = mpegts.createPlayer({
                                type: 'mpegts',
                                isLive: true,
                                url: proxyUrl
                            }, {
                                enableWorker: true,
                                enableStashBuffer: true,
                                stashInitialSize: 128,
                                autoCleanupSourceBuffer: true
                            });
                            player.attachMediaElement(video);
                            player.load();
                            video.muted = true;
                            player.on(mpegts.Events.LOADING_COMPLETE, () => {
                                console.log('MPEG-TS stream loaded successfully');
                            });
                            player.on(mpegts.Events.ERROR, (event, data) => {
                                console.error('MPEG-TS error:', event, data);
                            });
                            video.play().catch(e => console.log('Autoplay blocked:', e));
                        } else {
                            // Fallback: try native playback for other formats or Safari
                            video.src = proxyUrl;
                            video.muted = true;
                            video.play().catch(e => console.log('Autoplay blocked:', e));
                        }
                    } else {
                        // Fallback for secure iframes or other content
                        const iframe = document.createElement('iframe');
                        iframe.src = url;
                        iframe.frameBorder = '0';
                        iframe.allowFullscreen = true;
                        iframe.style.width = '100%';
                        iframe.style.height = '100%';
                        container.appendChild(iframe);
                    }
                }

                // Default Stream (The new one provided by user)
                const defaultStream = "http://het129c.ycn-redirect.com/live/918454578001/index.m3u8?t=dt_PzZsOxY6_xqEQ7PGKtw&e=1768111577";

                if (homeTeam) {
                    // Update Breadcrumb
                    const breadcrumbSpan = document.querySelector('.breadcrumb span');
                    breadcrumbSpan.textContent = `${params.get('home')} vs ${params.get('away')}`;

                    // Update Match Header
                    // Home Team
                    document.querySelector('.match-header .team:first-child h2').textContent = params.get('home');
                    const homeLogoDiv = document.querySelector('.match-header .team:first-child .team-logo');
                    if (homeLogoDiv) {
                        homeLogoDiv.innerHTML = `<img src="${params.get('homeLogo')}" style="width:100%; height:100%; object-fit:contain;">`;
                        homeLogoDiv.style.backgroundColor = 'transparent';
                    }

                    // Away Team
                    document.querySelector('.match-header .team:last-child h2').textContent = params.get('away');
                    const awayLogoDiv = document.querySelector('.match-header .team:last-child .team-logo');
                    if (awayLogoDiv) {
                        awayLogoDiv.innerHTML = `<img src="${params.get('awayLogo')}" style="width:100%; height:100%; object-fit:contain;">`;
                        awayLogoDiv.style.backgroundColor = 'transparent';
                    }

                    // Score & Status
                    document.querySelector('.score-large').textContent = params.get('score');
                    document.querySelector('.status-badge').textContent = params.get('status');

                    // Match Meta
                    const metaValues = document.querySelectorAll('.meta-item .value');
                    if (metaValues.length > 0) metaValues[0].textContent = params.get('league');
                    if (metaValues.length > 1) metaValues[1].textContent = params.get('commentator') || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    if (metaValues.length > 2) metaValues[2].textContent = params.get('channel') || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

                    // Dynamic Stream Loading
                    const streamUrl = params.get('streamUrl');
                    if (streamUrl) {
                        playStream(streamUrl);
                    } else {
                        playStream(defaultStream);
                    }
                } else {
                    // If no params, play default
                    playStream(defaultStream);
                }
            });
        </script>
</body>

</html>